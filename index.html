<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hor√≥scopo - Sess√£o da Tarde</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header></header>
    <div class="container">
        <img src="./assets/logo_sessao_tarde.png" alt="logo da sess√£o da tarde" width="400px">
        <h1>O que estava passando quando voc√™ nasceu?</h1>
        <form>
            <input type="date" id="date" />
            <button type="submit" id="submit" class="material-icons md-36">search</button>
        </form>
        <div>
            <p id="movie">PLACEHOLDER FILME</p>
        </div>
    </div>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1462390319564235"
        crossorigin="anonymous"></script>
    <!-- add_horoscopo -->
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1462390319564235" data-ad-slot="6310421239"
        data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <footer> <a href="./creditos.html">Cr√©ditos</a></footer>
    <script>
        document.getElementById("submit").addEventListener('click', (e) => {
            e.preventDefault();
            const date = new Date(document.getElementById("date").value + "GMT-03:00")

            const month = date.toLocaleString('en-US', { month: 'long', }).toLowerCase();
            const year = date.toLocaleString('en-US', { year: "numeric" });
            const day = date.toLocaleString('en-US', { day: "2-digit" });

            fetch(`https://horo-sessao-tarde.herokuapp.com/${year}/${month}/${day}`, { method: 'GET' })
                .then(async data => {
                    const display = document.getElementById("movie");
                    const { movie } = await data.json();
                    if (movie) {
                        display.innerHTML = `Filme: "${movie}"`;
                        display.style.visibility = 'visible';
                    }
                    else {
                        display.innerHTML = "N√£o temos informa√ß√µes para essa data üò¢";
                        display.style.visibility = 'visible';
                    }
                })
        })
    </script>
</body>

</html>